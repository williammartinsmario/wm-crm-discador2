
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>WM CRM & Discador</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <style>
    body { background: #f5f7fa; font-family: sans-serif; }
    header { background: #fff; padding: 10px; border-bottom: 2px solid #ccc; }
    .etapa { min-height: 400px; border: 1px solid #ddd; border-radius: 8px; padding: 10px; background: #fff; }
    .card-lead { border: 1px solid #ccc; margin-bottom: 10px; border-radius: 6px; padding: 8px; background: #fdfdfd; }
    footer { text-align: center; padding: 10px; background: #002b56; color: white; margin-top: 20px; }
    .etapas-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
    .btn-small { font-size: 0.8rem; padding: 3px 6px; }
  </style>
</head>
<body>
  <header class="d-flex justify-content-between align-items-center px-4">
    <img src="#" alt="Logo" style="height:30px;">
    <h5 class="my-2">WM CRM & Discador</h5>
    <div>
      <input type="file" id="fileInput">
      <button class="btn btn-primary btn-sm" onclick="colarContatos()">📋 Colar</button>
      <button class="btn btn-secondary btn-sm" onclick="editarEtapas()">⚙️ Etapas</button>
      <input type="text" id="filtro" placeholder="Buscar..." class="ms-2">
    </div>
  </header>

  <div class="container my-3">
    <div class="row" id="kanban">
      <div class="col etapa" id="novo">
        <div class="etapas-header"><b>📥 Novo</b></div>
        <div id="etapa-novo" class="dropzone"></div>
      </div>
      <div class="col etapa" id="em-atendimento">
        <div class="etapas-header"><b>📞 Em Atendimento</b></div>
        <div id="etapa-em-atendimento" class="dropzone"></div>
      </div>
      <div class="col etapa" id="fechado">
        <div class="etapas-header"><b>✅ Fechado</b></div>
        <div id="etapa-fechado" class="dropzone"></div>
      </div>
    </div>
  </div>

  <footer>© 2025 WM Assessoria</footer>

  <script>
    const projetos = {
      "Seleto Amoreiras": {
        endereco: "R. Joaquim Lacerda Coelho, 647 – Jardim Capivari, Campinas – SP",
        maps: "https://maps.app.goo.gl/Rgs2wBWEGY1F3qwR8",
        resumo: "✔ 2 dorms\n✔ Varanda gourmet\n✔ Lazer completo com piscina, coworking, academia, pet place"
      },
      "Rise Condomínio Clube": {
        endereco: "Rua Bartirá, 340 – Vila Ipê, Campinas – SP",
        maps: "https://maps.app.goo.gl/HZgyx2rGDtFEFcLs7",
        resumo: "✔ 2 dorms com varanda gourmet\n✔ Condomínio clube com piscina, coworking, pet place"
      },
      "Mangará Cores da Mata": {
        endereco: "Av. Graça Aranha, 175 – Vila Miguel Vicente Cury, Campinas – SP",
        maps: "https://maps.app.goo.gl/rYQrgLtEbRbjXvHZ9",
        resumo: "✔ 2 dorms com suíte\n✔ Varanda gourmet\n✔ Lazer completo"
      },
      "Alentejo Residencial": {
        endereco: "Av. Graça Aranha, 175 – Vila Miguel Vicente Cury, Campinas – SP",
        maps: "https://maps.app.goo.gl/rYQrgLtEbRbjXvHZ9",
        resumo: "✔ 2 e 3 dorms\n✔ Varanda gourmet\n✔ Wi-Fi, garagem proporcional"
      },
      "Algarve Residencial": {
        endereco: "Av. Graça Aranha, 175 – Vila Miguel Vicente Cury, Campinas – SP",
        maps: "https://maps.app.goo.gl/rYQrgLtEbRbjXvHZ9",
        resumo: "✔ 2 e 3 dorms tipo/garden\n✔ Churrasqueira à gás\n✔ Lazer completo"
      },
      "Central de Vendas": {
        endereco: "Av. Maria Emília A. dos Santos de Angelis, 485 – Parque Prado, Campinas – SP",
        maps: "https://maps.app.goo.gl/3ayKMC2bF8hJL8TK9",
        resumo: "✔ Conheça todos os projetos\n✔ Simulações e atendimento exclusivo"
      }
    };

    function colarContatos() {
      navigator.clipboard.readText().then(text => {
        const linhas = text.split("\n").filter(l => l.trim() !== "");
        for (let linha of linhas) {
          let partes = linha.split(/[,;\t ]+/);
          if (partes.length >= 2) {
            const nome = partes[0].trim();
            const numero = partes[1].replace(/[^0-9]/g, '');
            addCard(nome, numero);
          }
        }
      });
    }

    function addCard(nome, numero) {
      const div = document.createElement("div");
      div.className = "card-lead";
      div.innerHTML = `
        <b>${nome.toUpperCase()}</b><br><span>${numero}</span><br>
        <button class='btn btn-sm btn-primary mt-1' onclick='agendar("${nome}", "${numero}")'>📅 Agendar</button>
      `;
      document.getElementById("etapa-novo").appendChild(div);
    }

    function agendar(nome, numero) {
      const projeto = prompt("Digite o nome do projeto (ex: Seleto Amoreiras)");
      const dataHora = prompt("Digite a data e hora (ex: 09/07/2025 às 15:00)");
      if (!projetos[projeto]) return alert("Projeto não encontrado!");

      const p = projetos[projeto];
      const msg = `Olá ${nome}, tudo certo?\n\nConfirmando sua visita ao ${projeto}, localizado na ${p.endereco}.\n\n🕒 Horário agendado: ${dataHora}\n📍 Google Maps: ${p.maps}\n\nPeça para falar com o William.\n\n${p.resumo}\n\nTe espero no local! 😉`;
      const link = "https://wa.me/55" + numero + "?text=" + encodeURIComponent(msg);
      window.open(link, "_blank");
    }

    function editarEtapas() {
      alert("Funcionalidade de edição de etapas será ativada na próxima versão.");
    }
  </script>
</body>
</html>
